{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nlet userSelectedDate = null;\nlet countdownInterval = null;\n\n\nconst pickTime = document.querySelector(\"#datetime-picker\");\nconst buttonStart = document.querySelector(\"[data-start]\");\nconst buttonStop = document.querySelector(\"[data-stop]\");\nconst daysCount = document.querySelector(\"[data-days]\");\nconst hoursCount = document.querySelector(\"[data-hours]\");\nconst minutesCount = document.querySelector(\"[data-minutes]\");\nconst secondsCount = document.querySelector(\"[data-seconds]\");\n\nbuttonStart.disabled = true;\nbuttonStop.disabled = true;\n\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    if (countdownInterval) {\n      clearInterval(countdownInterval);\n      countdownInterval = null;\n    }\n\n    resetTimer();\n\n    if (selectedDate.getTime() < new Date().getTime()) {\n      iziToast.error({\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            close: false,\n            progressBar: false\n        });\n      buttonStart.disabled = true;\n      buttonStop.disabled = true;\n      userSelectedDate = null;\n    } else {\n      userSelectedDate = selectedDate;\n      buttonStart.disabled = false;\n      buttonStop.disabled = true;\n    }\n  },\n};\n\nflatpickr(pickTime, options);\n\nbuttonStart.addEventListener(\"click\", () => {\n  if (!userSelectedDate) {\n      iziToast.error({\n          message: 'Please choose a date in the future',\n          position: 'topRight',\n          close: false,\n          progressBar: false\n      });\n    return;\n  }\n\n  buttonStart.disabled = true;\n  buttonStop.disabled = false;\n  pickTime.disabled = true;\n\n  countdownInterval = setInterval(() => {\n    const now = new Date();\n    const timeLeft = userSelectedDate.getTime() - now.getTime();\n\n    if (timeLeft <= 0) {\n      clearInterval(countdownInterval);\n      countdownInterval = null;\n      resetTimer();\n      pickTime.disabled = false;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(timeLeft);\n    updateTimer(days, hours, minutes, seconds);\n  }, 1000);\n});\n\nbuttonStop.addEventListener(\"click\", () => {\n  buttonStart.disabled = false;\n  buttonStop.disabled = true;\n  pickTime.disabled = false;\n\n  userSelectedDate = null;\n  countdownInterval = null;\n  resetTimer();\n})\n\nfunction convertMs(ms) {\n    const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remain\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, \"0\");\n}\n\nfunction updateTimer(days, hours, minutes, seconds) {\n  daysCount.textContent = addLeadingZero(days);\n  hoursCount.textContent = addLeadingZero(hours);\n  minutesCount.textContent = addLeadingZero(minutes);\n  secondsCount.textContent = addLeadingZero(seconds);\n}\n\nfunction resetTimer() {\n    daysCount.textContent = \"00\";\n  hoursCount.textContent = \"00\";\n  minutesCount.textContent = \"00\";\n  secondsCount.textContent = \"00\";\n}"],"names":["userSelectedDate","countdownInterval","pickTime","buttonStart","buttonStop","daysCount","hoursCount","minutesCount","secondsCount","options","selectedDates","selectedDate","resetTimer","iziToast","flatpickr","now","timeLeft","days","hours","minutes","seconds","convertMs","updateTimer","ms","addLeadingZero","value"],"mappings":"+IAOA,IAAIA,EAAmB,KACnBC,EAAoB,KAGxB,MAAMC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5DL,EAAY,SAAW,GACvBC,EAAW,SAAW,GAGtB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAChCT,IACF,cAAcA,CAAiB,EAC/BA,EAAoB,MAGtBW,IAEID,EAAa,QAAS,EAAG,IAAI,KAAM,EAAC,QAAO,GAC7CE,EAAS,MAAM,CACT,QAAS,qCACT,SAAU,WACV,MAAO,GACP,YAAa,EACzB,CAAS,EACHV,EAAY,SAAW,GACvBC,EAAW,SAAW,GACtBJ,EAAmB,OAEnBA,EAAmBW,EACnBR,EAAY,SAAW,GACvBC,EAAW,SAAW,GAEzB,CACH,EAEAU,EAAUZ,EAAUO,CAAO,EAE3BN,EAAY,iBAAiB,QAAS,IAAM,CAC1C,GAAI,CAACH,EAAkB,CACnBa,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,WACV,MAAO,GACP,YAAa,EACvB,CAAO,EACH,MACD,CAEDV,EAAY,SAAW,GACvBC,EAAW,SAAW,GACtBF,EAAS,SAAW,GAEpBD,EAAoB,YAAY,IAAM,CACpC,MAAMc,EAAM,IAAI,KACVC,EAAWhB,EAAiB,QAAS,EAAGe,EAAI,QAAO,EAEzD,GAAIC,GAAY,EAAG,CACjB,cAAcf,CAAiB,EAC/BA,EAAoB,KACpBW,IACAV,EAAS,SAAW,GACpB,MACD,CAED,KAAM,CAAE,KAAAe,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAQ,EAC5DM,EAAYL,EAAMC,EAAOC,EAASC,CAAO,CAC1C,EAAE,GAAI,CACT,CAAC,EAEDhB,EAAW,iBAAiB,QAAS,IAAM,CACzCD,EAAY,SAAW,GACvBC,EAAW,SAAW,GACtBF,EAAS,SAAW,GAEpBF,EAAmB,KACnBC,EAAoB,KACpBW,GACF,CAAC,EAED,SAASS,EAAUE,EAAI,CAOrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EACjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASI,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASH,EAAYL,EAAMC,EAAOC,EAASC,EAAS,CAClDf,EAAU,YAAcmB,EAAeP,CAAI,EAC3CX,EAAW,YAAckB,EAAeN,CAAK,EAC7CX,EAAa,YAAciB,EAAeL,CAAO,EACjDX,EAAa,YAAcgB,EAAeJ,CAAO,CACnD,CAEA,SAASR,GAAa,CAClBP,EAAU,YAAc,KAC1BC,EAAW,YAAc,KACzBC,EAAa,YAAc,KAC3BC,EAAa,YAAc,IAC7B"}